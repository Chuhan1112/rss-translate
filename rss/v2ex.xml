<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/"><channel><title>V2EX</title><link>https://www.v2ex.com/</link><description>way to explore</description><lastBuildDate>Thu, 15 Feb 2024 14:27:11 GMT</lastBuildDate><generator>rfeed v1.1.1</generator><docs>https://github.com/svpino/rfeed/blob/master/README.md</docs><item><title>[酷工作] [成都/远程] [ Java ] [15-30k] 诚招中、高级 Java 后端开发，可远程</title><link>https://www.v2ex.com/t/1015779#reply0</link><description>&lt;h4&gt;新加坡电商平台项目，诚招中、高级 java 后端开发 1~2 名。&lt;/h4&gt;
&lt;h4&gt;一、岗位职责&lt;/h4&gt;
&lt;p&gt;• 理解业务需求，根据需求文档进行数据表设计，业务逻辑开发；&lt;/p&gt;
&lt;p&gt;• 负责完成接口文档编写和更新；&lt;/p&gt;
&lt;p&gt;• 与运维合作维护自己的项目。&lt;/p&gt;
&lt;h4&gt;二、职位要求&lt;/h4&gt;
&lt;p&gt;• 中级 3 年以上，高级 5 年以上 java 实际工作经验；&lt;/p&gt;
&lt;p&gt;• 能独立完成 java 项目开发，解决开发和维护过程中的各种问题；&lt;/p&gt;
&lt;p&gt;• 熟练掌握常用框架，如 spring ，spring cloud ，mybatis ，spring boot 等；&lt;/p&gt;
&lt;p&gt;• 良好的代码风格和编程习惯，工作认真严谨；&lt;/p&gt;
&lt;p&gt;• 熟悉 git ，maven 开发流程，具备 maven 模块化开发经验；&lt;/p&gt;
&lt;p&gt;• 具备一定 java 微服务构架经验，参与构架方案讨论；&lt;/p&gt;
&lt;p&gt;• 大学本科及以上学历，优秀者可放宽条件。&lt;/p&gt;
&lt;h4&gt;三、加分项：&lt;/h4&gt;
&lt;p&gt;• 有电商平台或财务系统开发经验优先；&lt;/p&gt;
&lt;p&gt;• 有团队或技术管理经验优先；&lt;/p&gt;
&lt;p&gt;• 英文读写无障碍，口语能正常沟通优先。&lt;/p&gt;
&lt;h4&gt;四、附加信息&lt;/h4&gt;
&lt;p&gt;• 工作时间：全职，周末双休；弹性工作时间：8 小时/天；&lt;/p&gt;
&lt;p&gt;• 可远程办公，限成都，会定期线下见面沟通；&lt;/p&gt;
&lt;p&gt;• 面试方式：同城线下/视频面试，面试轮数：1-2 轮。&lt;/p&gt;
&lt;h4&gt;五、联系方式 （请删除邮箱和 wx 中的短横线-）&lt;/h4&gt;
&lt;p&gt;• wx: g-o-n-g-x-l-e-i&lt;/p&gt;
&lt;p&gt;• 投递邮箱：&lt;a href="mailto:s-c-c-r-i-t@163.com"&gt;s-c-c-r-i-t@163.com&lt;/a&gt;&lt;/p&gt;</description><pubDate>Thu, 15 Feb 2024 14:25:13 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015779#reply0</guid></item><item><title>[Windows] win11 登录账户解锁前完成应用程序自启</title><link>https://www.v2ex.com/t/1015778#reply0</link><description>&lt;p&gt;无意中踩了个坑，而且还很抽象。&lt;/p&gt;
&lt;p&gt;win11 （ win10 及以前的不知道）设置里有个选项&lt;strong&gt;“使用我的登录信息在更新后自动完成设置”&lt;/strong&gt;，在&lt;strong&gt;账户&amp;gt;登录选项&lt;/strong&gt;里，开启后可以实现开机系统自动登录上次的账户，完成所有程序的开机自启，再自动锁定。而且并不需要等程序启动完成再锁定，是异步的，所有开机后往往会看见登录屏幕闪一下，那就是自动登录又马上锁定，程序就在后台慢慢自启。&lt;/p&gt;
&lt;p&gt;windows 的自启有很多实现方式，服务、计划任务、组策略、注册表、启动文件夹，等等，不同的程序往往可能选用不同的方式，所以在任务管理器的启动栏和设置的自启应用里面看到的不一定是全部，管家类程序能检测到的会更全一些，但也不一定是全部。&lt;/p&gt;
&lt;p&gt;用户如果想手动设一个应用开机自启，最简单的方式是把快捷方式丢到启动文件夹里面，也就是&lt;code&gt;win+r&lt;/code&gt;输入&lt;code&gt;shell:startup&lt;/code&gt;打开的文件夹，但这种方式设置的程序在用户登录，也就是输入密码之后才会自启。如果想开机就自启，往往需要创建一个合理设置的计划任务，但这种方式又不适用于 GUI 程序，一般都是命令行程序或 bat 脚本；或者用 winsw 包装成服务。而且不管怎么说，一个程序就要对应操作一轮，比较麻烦。这是不登录情况下的解决办法。&lt;/p&gt;
&lt;p&gt;说回正题，本来我电脑默认就是设置好的，导致我以为开机登录前完成自启理所当然，最近脑子一热玩了玩&lt;a href="https://github.com/hellzerg/optimizer" rel="nofollow"&gt;optimizer&lt;/a&gt;和&lt;a href="https://github.com/Sophia-Community/SophiApp" rel="nofollow"&gt;SophiApp&lt;/a&gt;，这俩都是所谓&lt;em&gt;优化 windows 的&lt;/em&gt;，适合装新机的时候用一下，快速改掉 win 部分默认的糟糕设置。其中 optimizer 就有一个&lt;strong&gt;win11-&amp;gt;加强隐私&lt;/strong&gt;的设置，看上去人畜无害，我就点了，结果重启以后就不能登录解锁前应用程序自启了。&lt;/p&gt;
&lt;p&gt;什么问题呢？这个&lt;strong&gt;加强隐私&lt;/strong&gt;是个复合设置项，同时会修改多个设置，其中包含了 win11 设置的&lt;strong&gt;隐私和安全性&amp;gt;诊断和反馈&amp;gt;诊断数据&lt;/strong&gt;，而从组策略层级禁用这个&lt;strong&gt;诊断数据&lt;/strong&gt;会不知为何导致&lt;strong&gt;使用我的登录信息在更新后自动完成设置&lt;/strong&gt;的界面变为&lt;em&gt;“其中一些设置由你的组织管理”&lt;/em&gt;并强制禁用，也就是设置变灰无法更改。更为奇怪的是，手动去组策略管理器里面根本找不到修改项，不知道 optimizer 是怎么实现的，或者 win11 设置界面只是统一显示&lt;em&gt;“其中一些设置由你的组织管理”&lt;/em&gt;，实际上修改的内容并非如此。&lt;/p&gt;
&lt;p&gt;题外话，勾选这个设置还会导致就近共享不能用，虽然有详情说明，因为那糟糕的翻译我一开始也没反应过来。&lt;/p&gt;
&lt;p&gt;解决方法也很简单，把勾选的勾掉，再去设置里面确认，果然隐私诊断数据和登录自启都恢复了。&lt;/p&gt;
&lt;p&gt;所以说，真的是能用就别乱改，不懂原理和细节就别乱玩，当时候坑的还是自己。windows 表面上的同一个功能可能会有复数个设置对应，它们之间可能是“与”的关系，也可能是“或”的关系，还可能有不同的优先级。win10 和 win11 的新版设置，老版的控制面板，注册表，组策略管理器，最喜闻乐见的当然是改一处其他地方一起变，但很多时候某个设置是某个地方独占的或者独立的，这种情况就需要仔细斟酌了。&lt;/p&gt;</description><pubDate>Thu, 15 Feb 2024 14:24:10 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015778#reply0</guid></item><item><title>[优惠信息] 公益 GPT4</title><link>https://www.v2ex.com/t/1015777#reply0</link><description>&lt;a href="https://allenyy.com" rel="nofollow noopener" target="_blank"&gt;https://allenyy.com&lt;/a&gt;&lt;br /&gt;免费 GPT4 ，GPT3.5 ，注册送 20 美元额度，邀请人各送 20 美元额度</description><pubDate>Thu, 15 Feb 2024 14:16:17 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015777#reply0</guid></item><item><title>[Linux] Linux 是如何隐藏`DIR`结构体定义的</title><link>https://www.v2ex.com/t/1015775#reply2</link><description>&lt;p&gt;最近在看 APUE 时遇到了&lt;code&gt;DIR&lt;/code&gt;，提到了由于不同的实现，解析目录文件内容方式不统一，通常会阻止直接读取目录文件的内容&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-c"&gt;DIR *opendir (const char *name)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;跳转到&lt;code&gt;DIR&lt;/code&gt;的定义&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-c"&gt;/* This is the data type of directory stream objects.
   The actual structure is opaque to users.  */
typedef struct __dirstream DIR;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;__dirstream&lt;/code&gt;定义找不到&lt;br /&gt;
注释说 DIR 结构体对用户透明，那么它是如何隐藏这个定义的呢？&lt;/p&gt;
&lt;p&gt;源文件&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-c"&gt;#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;dirent.h&amp;gt;

int main() {
    DIR* dir = opendir(".");
    struct dirent *d = readdir(dir);
    while (d) {
        printf("%s\n", d-&amp;gt;d_name);
        d = readdir(dir);
    }
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;使用 gcc 预处理源文件&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;➜  test gcc -E ls.c | grep __dirstream -A2 -B2
  };
# 127 "/usr/include/dirent.h" 3 4
typedef struct __dirstream DIR;


&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;并没有找到&lt;code&gt;__dirstream&lt;/code&gt;的定义&lt;/p&gt;
&lt;p&gt;所以是如何实现隐藏定义的？&lt;/p&gt;</description><pubDate>Thu, 15 Feb 2024 14:08:43 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015775#reply2</guid></item><item><title>[职场话题] 坐标南京 offer 选择问题，求大佬指点</title><link>https://www.v2ex.com/t/1015774#reply2</link><description>&lt;p&gt;各位大佬，我 7 年经验程序员，安全开发方向，因为家庭原因准备今年去南京工作生活，目前手里 2 个 offer ，不太了解南京这边行情，请大家帮忙分析下&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;奇安信&lt;/th&gt;
&lt;th&gt;南瑞外包（润和软件）&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;工作内容&lt;/td&gt;
&lt;td&gt;安全分析工具开发及测试工作&lt;/td&gt;
&lt;td&gt;go 语言开发&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;地点&lt;/td&gt;
&lt;td&gt;鼓楼，离家 43 公里&lt;/td&gt;
&lt;td&gt;江宁，离家 13 公里&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;工作时间&lt;/td&gt;
&lt;td&gt;965 具体加班情况不知道&lt;/td&gt;
&lt;td&gt;965 具体加班情况不知道&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;薪资&lt;/td&gt;
&lt;td&gt;n*14    &lt;br /&gt;固定薪资&lt;/td&gt;
&lt;td&gt;(n-3)*12&lt;br /&gt;基本薪资占比 30%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;优点&lt;/td&gt;
&lt;td&gt;符合个人一直以来的项目经验&lt;br /&gt;项目稳定，五年内不会被裁&lt;/td&gt;
&lt;td&gt;离家近&lt;br /&gt;项目稳定，甲方长期合同&lt;br /&gt;有饭补，听说南瑞伙食不错&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;缺点&lt;/td&gt;
&lt;td&gt;离家远，工作日开车要 1.5 小时&lt;/td&gt;
&lt;td&gt;五险一金按照最低系数交&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;</description><pubDate>Thu, 15 Feb 2024 14:06:21 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015774#reply2</guid></item><item><title>[酷工作] [成都/远程] [react] [12-22k] 诚招中、高级前端开发，可远程</title><link>https://www.v2ex.com/t/1015773#reply0</link><description>&lt;h4&gt;新加坡电商平台项目，诚招中、高级 react 前端开发 1 名。&lt;/h4&gt;
&lt;h4&gt;一、岗位职责&lt;/h4&gt;
&lt;p&gt;• 理解业务需求，根据已有的 UI 图进行页面开发；&lt;/p&gt;
&lt;p&gt;• 负责集成后端接口，并反馈接口问题；&lt;/p&gt;
&lt;p&gt;• 与运维合作维护自己的项目。&lt;/p&gt;
&lt;h4&gt;二、职位要求&lt;/h4&gt;
&lt;p&gt;• 3 年以上 react 或 vue 实际工作经验，react 最少需要 2 年；&lt;/p&gt;
&lt;p&gt;• 能独立完成 react 项目开发，解决开发和维护过程中的各种问题；&lt;/p&gt;
&lt;p&gt;• 熟悉 reactjs 、js 、ts 、html 、css ；&lt;/p&gt;
&lt;p&gt;• 良好的代码风格和编程习惯，工作认真严谨；&lt;/p&gt;
&lt;p&gt;• 大学本科及以上学历，优秀者可放宽条件。&lt;/p&gt;
&lt;h4&gt;三、加分项：&lt;/h4&gt;
&lt;p&gt;• 有电商平台或财务系统开发经验优先；&lt;/p&gt;
&lt;p&gt;• 有团队或技术管理经验优先；&lt;/p&gt;
&lt;p&gt;• 英文读写无障碍，口语能正常沟通优先。&lt;/p&gt;
&lt;h4&gt;四、附加信息&lt;/h4&gt;
&lt;p&gt;• 工作时间：全职，周末双休；弹性工作时间：8 小时/天；&lt;/p&gt;
&lt;p&gt;• 可远程办公，限成都，会定期线下见面沟通；&lt;/p&gt;
&lt;p&gt;• 面试方式：同城线下/视频面试，面试轮数：1-2 轮。&lt;/p&gt;
&lt;h4&gt;五、联系方式 （请删除邮箱和 wx 中的短横线-）&lt;/h4&gt;
&lt;p&gt;• wx: g-o-n-g-x-l-e-i&lt;/p&gt;
&lt;p&gt;• 投递邮箱：&lt;a href="mailto:s-c-c-r-i-t@163.com"&gt;s-c-c-r-i-t@163.com&lt;/a&gt;&lt;/p&gt;</description><pubDate>Thu, 15 Feb 2024 13:53:43 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015773#reply0</guid></item><item><title>[Apple] macOS 14 上切换输入法有延迟（不是 CapsLock），求好的解决方案。</title><link>https://www.v2ex.com/t/1015772#reply2</link><description>&lt;p&gt;&lt;strong&gt;系统：&lt;/strong&gt;最新的 macOS 14.3.1&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;硬件：&lt;/strong&gt;Macbook Pro M1 2020 16GB RAM&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;问题：&lt;/strong&gt;我平常有四种语言的输入法，经常需要多语言切换（中英日韩），每一种语言对应了不同的输入法。但是日常使用的时候发现，有的时候这个小小的输入法标识已经变成了对应的输入法，但是敲击键盘输入进去的却不是对应的文字……得重新多切换两遍才管用。&lt;/p&gt;
&lt;p&gt;这个问题或许不是 macOS 14 上才出现的，但这个版本绝对把这个问题加重了很多。我搜索了一下好像之前没有讨论这个的帖子，所以想请教一下，不知道这个问题有什么解决办法？&lt;/p&gt;</description><pubDate>Thu, 15 Feb 2024 13:51:34 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015772#reply2</guid></item><item><title>[问与答] 200¥能买到一个性能不错的二手迷你小主机么？</title><link>https://www.v2ex.com/t/1015771#reply0</link><description>&lt;p&gt;只要用来安装 owncloud 家庭存储，会用 usb 外接一个大容量硬盘，对硬件配置大概的希望是&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CPU 双核以上的，主频 1.5GHz 以上的。低功耗则最好。&lt;/li&gt;
&lt;li&gt;内存不低于 4G.&lt;/li&gt;
&lt;li&gt;硬盘 SSD ，不小于 30GB.&lt;/li&gt;
&lt;li&gt;带一个百兆及以上的网口，有多个更好，不强求。&lt;/li&gt;
&lt;li&gt;带 2 个及以上 USB 3.0 接口。&lt;/li&gt;
&lt;li&gt;主机尺寸越小越好，不强求。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这样的配置，200¥能买到么？不挑牌子，但求稳定。&lt;/p&gt;</description><pubDate>Thu, 15 Feb 2024 13:35:27 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015771#reply0</guid></item><item><title>[程序员] 请教一个内容可变分块（Content Defined Chunk, CDC）后合并文件与源文件不符的问题</title><link>https://www.v2ex.com/t/1015770#reply0</link><description>&lt;p&gt;最近在做一个跟网络存储有关的项目涉及到 CDC ，目前比较主流的算法除了前几年新提出的 FastCDC 以外就是基于拉宾卡普算法的 Rabin CDC ，其基本思想是计算拉宾指纹并根据滚动哈希进行分块。目前比较典型的成熟应用就是海文的 Seafile ，它的后端使用的是 Rabin CDC 并且网络上有很多针对其源代码的分析，例如：
[1] &lt;a href="http://www.ilovecpp.com/2019/02/03/cdc/" rel="nofollow"&gt;http://www.ilovecpp.com/2019/02/03/cdc/&lt;/a&gt;
[2] &lt;a href="https://blog.csdn.net/cyk0620/article/details/120813255" rel="nofollow"&gt;https://blog.csdn.net/cyk0620/article/details/120813255&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;我也找到了一个 Github 仓库基本上是把 Seafile 的分块部分单独拿出来做了个主程序的实现：
&lt;a href="https://github.com/baixiangcpp/FileCDC" rel="nofollow"&gt;https://github.com/baixiangcpp/FileCDC&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;目前遇到的问题是，当我尝试将分块后的文件块再重新合并成一个文件，但发现这个文件跟原来的哈希不一致。具体来说，我使用 ubuntu 官网的 22.04 amd64 的系统镜像 iso 进行测试，源文件的 SHA256 哈希：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sha256sum ubuntu.iso 
a435f6f393dda581172490eda9f683c32e495158a780b5a1de422ee77d98e909  ubuntu.iso
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这与 Ubuntu 官网提供的 SHA256 校验值是一致的。但我尝试将分块后的块按照顺序重新合并后，得到的文件虽然大小与源文件相同，但 SHA256 哈希却变了:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ sha256sum merged.iso 
04a917c75a2d7733e0aabe6a5dbd0bbc875e8d3e63622c8d3c78b9058b92abd3  merged.iso
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;我自己用 C#另外实现了一遍，也是针对同一个 iso 源文件，但合并出来的文件哈希也不一样，甚至分块结果（也就是分了多少块，每一块的 SHA1 ）和 C 语言的实现也不一样。&lt;/p&gt;
&lt;p&gt;我用小黄鸭调试法检查了几遍也没能发现逻辑上的错误和问题，初步的断点调试和单元测发现拉宾指纹的计算部分 C#的运算结果和 C 语言的运算结果没有区别，但文件分块出来不一样，合并起来也不一样，完全没有排查的思路。毕竟一个大文件会分出 500+块，也很难通过断点一个个查到底是哪里出了问题。&lt;/p&gt;
&lt;p&gt;所以现在出现的现象包括：
1. 分块后合并导致哈希不一致（ C 语言实现和 C#实现都存在，但两种实现合并后的文件哈希也互不一致）
2. C#的实现和 C 语言实现两种实现计算 Rabin 指纹的结果一致，但分块结果不完全一致，具体来说，有些 C#分出来的块在 C 语言实现的结果中不存在，C 语言实现的结果一些块在 C#结果中也没有，分出来的块数也不一样。但有一些块是一样的，SHA1 和大小都一致。&lt;/p&gt;
&lt;p&gt;所以想问问大佬们：
1. 以上出现的两种情况是正常的吗？
2. 如果不正常，是由于什么原因造成的？
3. 如何调试这样的问题？打断点一步步调试？找拉宾指纹的分割点可是一个个字节找的，这恐怕不太现实&lt;/p&gt;
&lt;p&gt;附：
1. C 语言的完整代码是基于 &lt;a href="https://github.com/baixiangcpp/FileCDC" rel="nofollow"&gt;https://github.com/baixiangcpp/FileCDC&lt;/a&gt; ，但改动了两个地方
一个是写块的函数，我把写在当前工作目录改成了卸载 chunks 文件夹中：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;```c

int do_write_chunk (const unsigned char *checksum, const char *buf, int len)
{
    char chksum_str[41];
    int fd;
    int n;
    rawdata_to_hex (checksum, chksum_str, 20);
    /* Don't write if the block already exists. */
    if (g_access (chksum_str, F_OK) == 0)
        return 0;
    // Make path "/workspace/chunks/{chksum_str}"
    char path[100];
    sprintf(path, "/workspaces/FileCDC-master/chunks/%s", chksum_str);
    fd = open (path, O_WRONLY|O_CREAT,0666);
    if (fd == -1) {
        printf ("Failed to open block %s.\n", path);
        return -1;
    }
    n = write (fd, buf, len);
    if (n &amp;lt; 0) {
        printf ("Failed to write chunk %s.\n", chksum_str);
        close (fd);
        return -1;
    }
    close(fd);
    return 0;
}
```

另一个是我自己加的，合并分块的函数:

```c

void file_merge_cdc(CDCFileDescriptor* file_desc)
{
    int i;
    int fd;
    char path[100];
    char *buf = malloc(file_desc-&amp;gt;block_max_sz);
    int merged_file = open("merged.iso", O_WRONLY | O_APPEND, 0666);
    if(merged_file == -1)
    {
        printf("Failed to open merged file.\n");
        return;
    }
    for(i = 0; i &amp;lt; file_desc-&amp;gt;block_nr; i++)
    {
        char chksum_str[41];
        rawdata_to_hex(file_desc-&amp;gt;blk_sha1s + i * CHECKSUM_LENGTH, chksum_str, 20);
        sprintf(path, "/workspaces/FileCDC-master/chunks/%s", chksum_str);
        fd = open(path, O_RDONLY);
        if(fd == -1)
        {
            printf("Failed to open block %s.\n", path);
            return;
        }
        read(fd, buf, file_desc-&amp;gt;block_max_sz);
        close(fd);
        write(merged_file, buf, file_desc-&amp;gt;block_max_sz);
    }
    close(merged_file);
    free(buf);
}
```

2. C#的分块实现


```c#
    public class RabingCDC
    {
        private RabinChecksum rabinChecksum = new RabinChecksum();
        private readonly int MinChunkSize = 1024 * 1024 * 6; // 6MB
        private readonly int MaxChunkSize = 1024 * 1024 * 10; // 10MB
        private readonly int AvarageChunkSize = 1024 * 1024 * 8; // 8MB

        private LinkedList&amp;lt;string&amp;gt; fileHashed = new LinkedList&amp;lt;string&amp;gt;();
        public async Task FileChunkCDC(Stream file)
        {
            byte[] buffer = new byte[MaxChunkSize];
            int cursor = MinChunkSize - 1;
            int bufferDataTail = 0;
            while (true)
            {
                int readSize = 4096; // 4KB
                if (bufferDataTail &amp;lt; MinChunkSize)
                {
                    readSize = MinChunkSize - bufferDataTail + 4096;
                }
                else if (MaxChunkSize - bufferDataTail &amp;lt; 4096)
                {
                    readSize = MaxChunkSize - bufferDataTail;
                }

                int readed = await file.ReadAsync(buffer, bufferDataTail, readSize);
                bufferDataTail += readed;
                if (bufferDataTail &amp;lt; MinChunkSize || cursor &amp;gt;= bufferDataTail)
                {
                    // The file is less than minimum chunk size
                    // Write the entire file as a block
                    WriteBlock(buffer.Take(readed).ToArray());
                    bufferDataTail = 0;
                    cursor = MinChunkSize - 1;
                    break;
                }
                
                uint fingerprint = 0;
                while (cursor &amp;lt; bufferDataTail)
                {
                    if (cursor == MinChunkSize - 1)
                    {
                        fingerprint = rabinChecksum.GetRabingChecksum(buffer.Skip(cursor).Take(48).ToArray());
                    }
                    else
                    {
                        fingerprint = rabinChecksum.RabinRollingChecksum(fingerprint, 48, buffer[cursor - 48], buffer[cursor]);
                    }
                   

                    if ((fingerprint &amp;amp; (AvarageChunkSize - 1)) == (0x0013 &amp;amp; (AvarageChunkSize - 1)) || cursor + 1 &amp;gt;= MaxChunkSize)
                    {
                        WriteBlock(buffer.Take(cursor + 1).ToArray());
                        // Move the rest of the buffer to the beginning
                        Array.Copy(buffer, cursor, buffer, 0, bufferDataTail - cursor-1);
                        bufferDataTail -= cursor + 1;
                        cursor = MinChunkSize - 1;
                        break;
                    }
                    else
                    {
                        cursor++;
                    }
                }
            }
        }
        public void WriteBlock(byte[] block)
        {
            var path = "D:\\Code\\temp\\cdc";
            // Write block as a new file under the path, the file name is the SHA1 of the block
            // Calcualte SHA1 of the block
            byte[] sha1 = SHA1.Create().ComputeHash(block);
            string fileName = BitConverter.ToString(sha1).Replace("-", "").ToLower();
            fileHashed.AddLast(fileName);
            File.WriteAllBytes(Path.Combine(path, fileName), block);
        }

        public async Task FileMergeCDC(string chunksFolderPath , string resultFilePath)
        {
            
            var fileStream = File.OpenWrite(resultFilePath);
            foreach (var file in fileHashed)
            {
                var buffer = File.ReadAllBytes(Path.Combine(chunksFolderPath, file));
                await fileStream.WriteAsync(buffer, 0, buffer.Length);
            }
            fileStream.Close();
        }
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;</description><pubDate>Thu, 15 Feb 2024 13:21:57 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015770#reply0</guid></item><item><title>[iPhone] 在国外使用 ios 自带地图时发生了不少笑话</title><link>https://www.v2ex.com/t/1015769#reply0</link><description>例如，今天用“查找”查看我妈在国内的位置，因为在国外网络环境下 ios 自带地图的中国部分数据是缺失的，我妈的位置落在地图上是一条施工中的道路，地图上这条道路标注为“在建”，于是 iOS 直接说我妈当前所处的位置叫做“在建”。&lt;br /&gt;&lt;br /&gt;又由于我妈正好坐在车上（实际上这条路已经通车，地图数据缺失而已），于是 iOS 画了一个开车的符号。&lt;br /&gt;&lt;br /&gt;一个人开车在一条“在建”的路上，这是神仙啊&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;a href="https://i.imgur.com/tyZ2Zrs.jpeg" rel="nofollow noopener" target="_blank"&gt;&lt;img class="embedded_image" rel="noreferrer" src="https://i.imgur.com/tyZ2Zrs.jpeg" /&gt;&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;a href="https://i.imgur.com/qapteup.jpeg" rel="nofollow noopener" target="_blank"&gt;&lt;img class="embedded_image" rel="noreferrer" src="https://i.imgur.com/qapteup.jpeg" /&gt;&lt;/a&gt;</description><pubDate>Thu, 15 Feb 2024 13:04:58 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015769#reply0</guid></item><item><title>[问与答] 有对比过笔记本 LTE 和手机热点的吗？</title><link>https://www.v2ex.com/t/1015768#reply3</link><description>&lt;p&gt;RT ，最近发现除了 thinkpad 也有相对便宜的笔记本搭载 LTE 了，请问下有对比过笔记本 LTE 和手机热点的吗，比如从速度、稳定性方面。&lt;/p&gt;</description><pubDate>Thu, 15 Feb 2024 12:54:33 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015768#reply3</guid></item><item><title>[Safari] 各位的 Safari 有没有碰到过红绿灯被一个图标占掉的情况？</title><link>https://www.v2ex.com/t/1015767#reply1</link><description>Safari 的所有红绿灯都被这个图标占了，好像不太正常&lt;br /&gt;其他软件都没有这个问题，只有 Safari 被占了，另外我这里应该也没有 iPad&lt;br /&gt;图： &lt;a href="https://cln.sh/Jhlx78hb" rel="nofollow noopener" target="_blank"&gt;https://cln.sh/Jhlx78hb&lt;/a&gt;</description><pubDate>Thu, 15 Feb 2024 12:49:03 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015767#reply1</guid></item><item><title>[奇思妙想] 关于高校服务的商业变现思路</title><link>https://www.v2ex.com/t/1015766#reply10</link><description>&lt;p&gt;我们学校的教务系统很拉跨，所以仅限于校园网访问，同学放假后想查询考试成绩、学分绩等相当麻烦，所以我们开发了一个小程序，通过爬虫来访问本校教务，相当于高校教务小程序版，学校对我们的爬虫行为默许了，并在校内申请了大创项目，想问问各位，以这样的信息查询平台而言，除了投放广告外，还有什么更好的变现思路？请教一下各位大佬&lt;/p&gt;</description><pubDate>Thu, 15 Feb 2024 12:16:14 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015766#reply10</guid></item><item><title>[问与答] 3HK 的 大湾区 45G DIY 储值卡值得买吗？</title><link>https://www.v2ex.com/t/1015765#reply2</link><description>&lt;p&gt;之前看到有人推荐这张 45G 香港流量卡，合法科学上网，值得买吗？&lt;/p&gt;</description><pubDate>Thu, 15 Feb 2024 12:04:26 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015765#reply2</guid></item><item><title>[宽带症候群] 四川绵阳电信手机数据流量部分屏蔽 cn.bing.com</title><link>https://www.v2ex.com/t/1015763#reply0</link><description>春节外出，发现手机流量使用必应有时会出现长时间的白屏无响应(Android Chrome)，几十秒后恢复正常。最开始我以为这是必应服务器的问题，但后面问题频繁出现，且白屏时间非常有规律，我意识到这可能是运营商屏蔽。&lt;br /&gt;&lt;br /&gt;这种新颖的屏蔽方式引起了我的好奇，一回到家就进行了测试：&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;家庭宽带访问正常，两个 ip 均可达。&lt;br /&gt;&lt;br /&gt;诊断域名 &lt;a href="http://cn.bing.com" rel="nofollow noopener" target="_blank"&gt;cn.bing.com&lt;/a&gt;...&lt;br /&gt;当前是否联网:    已联网&lt;br /&gt;当前联网类型:    WIFI&lt;br /&gt;本地 IP:    192.168.1.2&lt;br /&gt;本地网关:    192.168.1.1&lt;br /&gt;本地 DNS:    ,&lt;br /&gt;远端域名:    &lt;a href="http://cn.bing.com" rel="nofollow noopener" target="_blank"&gt;cn.bing.com&lt;/a&gt;&lt;br /&gt;DNS 解析结果:    202.89.233.101,202.89.233.100 (44ms)&lt;br /&gt;&lt;br /&gt;开始 TCP 连接测试...&lt;br /&gt;Connect to host: 202.89.233.101...&lt;br /&gt;1's time=47ms,  2's time=45ms,  3's time=45ms,  4's time=40ms,  average=44ms&lt;br /&gt;Connect to host: 202.89.233.100...&lt;br /&gt;1's time=40ms,  2's time=45ms,  3's time=40ms,  4's time=47ms,  average=43ms&lt;br /&gt;----------------------------&lt;br /&gt;&lt;br /&gt;数据流量访问异常，其中一个 ip 不可达&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;诊断域名 &lt;a href="http://cn.bing.com" rel="nofollow noopener" target="_blank"&gt;cn.bing.com&lt;/a&gt;...&lt;br /&gt;当前是否联网:    已联网&lt;br /&gt;当前联网类型:    WAP&lt;br /&gt;本地 IP:    &lt;a href="http://10.xxx.xxx.xxx" rel="nofollow noopener" target="_blank"&gt;10.xxx.xxx.xxx&lt;/a&gt;&lt;br /&gt;本地 DNS:    ,&lt;br /&gt;远端域名:    &lt;a href="http://cn.bing.com" rel="nofollow noopener" target="_blank"&gt;cn.bing.com&lt;/a&gt;&lt;br /&gt;DNS 解析结果:    202.89.233.101,202.89.233.100 (3ms)&lt;br /&gt;&lt;br /&gt;开始 TCP 连接测试...&lt;br /&gt;Connect to host: 202.89.233.101...&lt;br /&gt;1's time=70ms,  2's time=49ms,  3's time=60ms,  4's time=47ms,  average=56ms&lt;br /&gt;Connect to host: 202.89.233.100...&lt;br /&gt;1's time=TimeOut,  2's time=TimeOut,  &lt;br /&gt;&lt;br /&gt;&lt;br /&gt;这就可以解释为什么数据流量有时能正常访问，而有时会有 30s 的白屏了。&lt;br /&gt;&lt;br /&gt;DNS 请求得到的两个 ip 顺序不固定，chrome 会先尝试访问第一个 ip ，30s 后无响应会尝试访问第二个 ip 。如果 chrome 先收到 202.89.233.100 ，会尝试先以这个 ip 访问。很明显这个 ip 已被屏蔽，于是 chrome 会等待 30s 的超时时间，然后从第二个 ip 访问。如果 chrome 先收到 202.89.233.101,该 ip 没有被屏蔽，访问正常。这也就和上面的情况吻合了。</description><pubDate>Thu, 15 Feb 2024 11:25:23 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015763#reply0</guid></item><item><title>[问与答] 如何将 qq 收藏导出到硬盘中？</title><link>https://www.v2ex.com/t/1015762#reply5</link><description>&lt;p&gt;偶然打开 qq 收藏，发现当年和同学的照片、唱的歌都在里面。其中音色婉转，虽然稚嫩可笑，但毕竟是我的回忆。想把他导出来分享给同学。但是里面的音频文件无论如何都没法导出。&lt;/p&gt;
&lt;p&gt;寄希望于 v 攒高手了&lt;/p&gt;
&lt;p&gt;站内也搜了一下，有位成功的同学，但那是 2011 年的事情了&lt;/p&gt;</description><pubDate>Thu, 15 Feb 2024 11:24:57 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015762#reply5</guid></item><item><title>[问与答] 急需一款订阅提醒软件，有推荐的吗？</title><link>https://www.v2ex.com/t/1015761#reply5</link><description>&lt;p&gt;最好支持小组件&lt;/p&gt;
&lt;p&gt;UI 最好好看一点的，付费的也没事&lt;/p&gt;</description><pubDate>Thu, 15 Feb 2024 11:13:54 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015761#reply5</guid></item><item><title>[问与答] 关于 2fa 备份的疑问</title><link>https://www.v2ex.com/t/1015759#reply6</link><description>&lt;p&gt;想问一下大家有没有必要把 2fa 的密钥都存下来。目前用的是微软家的 authenticator ，但是之前听 v 友说微软的这款验证器可能会丢失验证账号，为了在这种事情真的发生之后不至于手忙脚乱，请问有没有必要把密钥重新存一份下来呢？&lt;/p&gt;</description><pubDate>Thu, 15 Feb 2024 10:52:31 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015759#reply6</guid></item><item><title>[Windows] 刚装好的 win11.23h2 就自己抽风重启怎么回事</title><link>https://www.v2ex.com/t/1015758#reply1</link><description>以前是 win10 升的 win11 ，dev 升级 26052 把电脑搞瘫痪了&lt;br /&gt;官网下了个 23h2 的 iso ，格盘彻底重装了下&lt;br /&gt;全新系统 什么软件，驱动都还没装就自己抽风重启&lt;br /&gt;是按 reset 的那种感觉，不是正常的注销重启</description><pubDate>Thu, 15 Feb 2024 10:51:17 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015758#reply1</guid></item><item><title>[职场话题] 如何 0 基础到找到一份程序员工作？这个问题可能有点可笑</title><link>https://www.v2ex.com/t/1015757#reply31</link><description>&lt;p&gt;我本人长期失业，个人财务状况很糟糕。
我想找到一份工资比较高的工作。
请问：我要具备哪些能力，最，最容易找到一份薪水不错的开发工作？
这些能力可以通过自学获得吗？大概学习的方法是什么？&lt;/p&gt;</description><pubDate>Thu, 15 Feb 2024 10:50:56 GMT</pubDate><guid isPermaLink="true">https://www.v2ex.com/t/1015757#reply31</guid></item></channel></rss>